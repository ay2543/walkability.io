<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>report.knit</title>

<script src="site_libs/header-attrs-2.18/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/sandstone.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="data.html">
    <span class="fa fa-book"></span>
     
    Data Sources
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-bar-chart-o"></span>
     
    Data Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="cleaning.html">Data Cleaning</a>
    </li>
    <li>
      <a href="explore.html">Exploratory Analysis</a>
    </li>
    <li>
      <a href="regression.html">Statistical Analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-eye"></span>
     
    Visualizations
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="map.html">Walkability Map</a>
    </li>
    <li>
      <a href="dashboard.html">NY State Dashboard</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-folder-open"></span>
     
    Report
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="results.html">Key Findings</a>
    </li>
    <li>
      <a href="limitations.html">Strengths and Limitation</a>
    </li>
    <li>
      <a href="report.html">Project Report</a>
    </li>
  </ul>
</li>
<li>
  <a href="team.html">
    <span class="fa fa-group"></span>
     
    Who We Are
  </a>
</li>
<li>
  <a href="Fun.html">
    <span class="fa fa-smile-o"></span>
     
    Fun Facts
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ay2543/walkability.io">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>




</div>


<style>
div.blue { background-color:aliceblue; border-radius: 5px; padding: 20px;}
</style>
<div id="project-report" class="section level2 blue">
<h2>Project Report</h2>
<div id="walk-the-walk-the-effect-of-neighborhood-walkability-on-health"
class="section level3">
<h3>Walk the walk: The effect of neighborhood walkability on health</h3>
<div id="amy-yeung-winston-luhur-sophie-zhang-shirley-liang-wenyan-ma"
class="section level5">
<h5>Amy Yeung, Winston Luhur, Sophie Zhang, Shirley Liang, Wenyan
Ma</h5>
</div>
</div>
</div>
<p><br></p>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p><br></p>
<div id="our-motivation" class="section level3">
<h3>Our Motivation</h3>
<p>Urban planning around the US is increasingly <a
href="https://www.vox.com/features/23191527/urban-planning-friendship-houston-cars-loneliness">designed
around cars and not walking</a>, and not everywhere in the US is
walkable for its residents. This trend accelerated in the post-war era,
with:</p>
<ul>
<li>suburbanization — combined with <a
href="https://theecologist.org/2016/mar/07/racist-housing-how-postwar-suburban-development-led-todays-inner-city-lead-poisoning">racist
redlining and white flight</a> — and the subsequent <a
href="https://en.wikipedia.org/wiki/Urban_decay#:~:text=Urban%20%20decay%20">urban
decay</a></li>
<li>lobbying by the car industry, which has reduced the prevalence of
public transport and walkable neighborhoods in favor of <a
href="https://islandpress.org/books/autonorama">highways</a>,</li>
</ul>
<p>and many other factors.</p>
<p>The recent pandemic has only further emphasized the important role
that accessible built environments—including walkable neighborhoods—play
in our <a
href="https://phys.org/news/2022-01-inclusion-walkability-key-rebuilding-cities.html">individual
and collective physical health and mental wellbeing</a>.</p>
<p>To explore the landscape of walkability in the US and New York City,
we wanted to learn more about the <a
href="https://www.epa.gov/smartgrowth/smart-location-mapping#walkdability">National
Walkability Index</a> published by the Environmental Protection Agency
(EPA) and how it relates to health outcomes. Additionally, we wanted to
explore potential ways to improve the EPA’s walkability index to make it
more comprehensive. While other walkability indices in the US exist,
such as the <a
href="https://www.walkscore.com/cities-and-neighborhoods/">Walk
Score</a>, none are available at the census block level, or the indices
are created specifically for a study. One literature review you can
peruse is <a
href="https://www.mdpi.com/2071-1050/14/17/10933">here</a>.</p>
<p>As five <em>passionate walkaholics</em>🚶🏻‍♂️ and current public health
graduate students, we also wanted to explore the intersection of our
shared interests. We hope that our project will help to highlight the
connections between walkability, the built environment, and
community-level health in order to promote change towards a more
accessible (and walkable) future. We also hope that our project and
findings will spark the same passion we have in walking in others.</p>
<p><br></p>
</div>
<div id="related-work" class="section level3">
<h3>Related Work</h3>
<p>Various studies have explored the relationship between neighborhood
walkability and health, such as <a
href="https://doi.org/10.1016/j.ypmed.2020.106122">Watson et al.’s</a>
and <a href="https://doi.org/10.1016/j.cpcardiol.2022.101533">Makhlouf
et al.’s research</a> at various levels of census subdivisions across
the US; and have found that higher neighborhood walkability scores were
associated with a greater prevalence of health-promoting behaviors and
lower risk for cardiovascular disease. <a
href="https://doi.org/10.1080/10511482.2022.2099937">Other studies</a>
have focused on historical gentrification and mobility on neighborhood
walkability and environmental pollution.</p>
<p>A <a
href="https://doi.org/10.1016/j.landurbplan.2011.05.002">number</a> <a
href="https://doi.org/10.1016/j.envint.2011.07.004">of studies</a> have
also examined the impacts of green space (for example, neighborhood
parks) on physical and mental health. While studies do find the expected
positive relationship between number of and ease of access to green
spaces and health outcomes, the results are not clear-cut and depend on
various intersections with socioeconomic factors, such as income.</p>
<p>Though some studies have looked into the relationship between NWI and
health outcomes, few have explored multiple health outcomes at the
national and city-level. Moreover, further work is required to fully
understand the complex relationship between neighborhood walkability —
and the built environment as a whole — on community health, and its
complex ties to systemic inequities and racist post-war urban
policies.</p>
<p><br></p>
</div>
<div id="initial-questions" class="section level3">
<h3>Initial Questions</h3>
<p>Our project explores neighborhood walkability using the EPA’s <a
href="https://www.epa.gov/smartgrowth/smart-location-mapping#walkability">National
Walkability Index (NWI)</a> — a nationwide geographic data resource
which ranks block groups according to their relative walkability, which
we had learned about through our coursework. Through our research, we
hope to highlight various health outcomes which are associated with
walkability score; and the potential that increasing walkability can
have on environmental and health equity in the future.</p>
<p>Our initial questions were centered around how the walkability of a
neighborhood might impact health outcomes. Particularly, is the EPA
walkability score of an area significantly associated with various
neighborhood health outcomes (such as high blood pressure and mental
health)? How does walkability score vary across the US? Is there
significant spatial clustering of walkability scores in NYC? Broadly, we
aimed to explore the myriad of ways in which neighborhood walkability is
connected to space, place, and health.</p>
<p>For more, explore the website that accompanies this report <a
href="index.html">here</a> and the underlying website code <a
href="https://github.com/ay2543/walkability.io">here</a> .</p>
<p><br></p>
</div>
<div id="project-proposal" class="section level3">
<h3>Project Proposal</h3>
<p>Our initial proposal is linked <a href="proposal.html">here</a> for
reference.</p>
<p><br> <br></p>
</div>
</div>
<div id="data-sources-and-cleaning" class="section level2">
<h2>Data Sources and Cleaning</h2>
<p><br></p>
<div id="data-sources" class="section level3">
<h3>Data Sources</h3>
<div
id="national-walkability-index-epa-nwi-us-environmental-protection-agency"
class="section level4">
<h4>2021 National Walkability Index (EPA NWI), US Environmental
Protection Agency</h4>
<p>The 2021 <a
href="http://edg.epa.gov/metadata/catalog/search/resource/details.page?uuid=%7B251AFDD9-23A7-4068-9B27-A3048A7E6012%7D">National
Walkability Index</a> from the EPA provides walkability scores based on
a simple formula that ranks selected indicators from the Smart Location
Database (which summarizes 90 indicators associated with the built
environment) that have been demonstrated to affect the propensity of
walk trips. Currently, the National Walkability Index dataset ranks each
block group relative to all other block groups in the United States on a
scale from 0-20; and data can be aggregated to larger spatial units
using Federal Information Processing Standards (FIPS) codes.</p>
<ul>
<li><p><a
href="https://www.epa.gov/sites/default/files/2021-06/documents/national_walkability_index_methodology_and_user_guide_june2021.pdf">Methodology</a></p></li>
<li><p><a
href="https://www.epa.gov/sites/default/files/2021-06/documents/epa_sld_3.0_technicaldocumentationuserguide_may2021.pdf">Codebook</a></p></li>
<li><p>Variables of interest:</p>
<ul>
<li><code>FIPS code</code>: a unique identifier for geographic
areas</li>
<li><code>National Walkability Index</code>: a relative scale of
walkability, ranging from 0-20</li>
</ul></li>
</ul>
<p><br></p>
</div>
<div id="american-community-survey-acs-us-census-bureau"
class="section level4">
<h4>2020 American Community Survey (ACS), US Census Bureau</h4>
<p>The <a
href="https://data.census.gov/table?tid=ACSDP1Y2021.DP05">American
Community Survey (ACS)</a> is an annual, nationwide survey conducted by
the US Census Bureau and produces information on social, economic,
housing, and demographic characteristics about our nation’s population
every year. This information is a vital tool that communities can use to
see how they are changing across the years.</p>
<ul>
<li><p><a
href="https://www.census.gov/content/dam/Census/library/publications/2020/acs/acs_general_handbook_2020.pdf">Methodology</a></p></li>
<li><p><a
href="https://www.census.gov/programs-surveys/acs/technical-documentation/code-lists.2020.html#list-tab-NZBIUOT6KFYGCOIOAE">Codebook</a></p></li>
<li><p>Variables of interest (in percentage expect median household
income):</p>
<ul>
<li><code>Age</code>: Age &gt;= 18 years</li>
<li><code>Sex</code>: Male or female</li>
<li><code>Race/ethnicity</code>: White, Black or African American,
Latino or Hispanic, Asian, American Indian or American Native, 2+
races</li>
<li><code>Median household income</code>: Median household income (in
dollars)</li>
</ul></li>
</ul>
<p><br></p>
</div>
<div
id="behavioral-risk-factor-surveillance-system-brfss-centers-for-disease-control-and-prevention"
class="section level4">
<h4>2020 Behavioral Risk Factor Surveillance System (BRFSS), Centers for
Disease Control and Prevention</h4>
<p><a
href="https://chronicdata.cdc.gov/500-Cities-Places/PLACES-Local-Data-for-Better-Health-Census-Tract-D/cwsq-ngmh/data">The
Behavioral Risk Factor Surveillance System (BRFSS)</a> is an annual,
nationwide system of health-related telephone surveys conducted by the
Centers for Disease Control and Prevention (CDC) which collects
information about US residents regarding their health-related risk
behaviors, chronic health conditions, and use of preventive services.
Established in 1984 with 15 states, BRFSS now collects data in all 50
states as well as the District of Columbia and three US territories.
BRFSS completes more than 400,000 adult interviews each year, making it
the largest continuously conducted health survey system in the
world.</p>
<ul>
<li><p>Methodology: <a
href="https://www.cdc.gov/pcd/issues/2022/21_0459.htm">Click
here</a></p></li>
<li><p>Codebooks</p>
<ul>
<li><a
href="https://www.cdc.gov/places/measure-definitions/health-status/index.html">Codebook
1</a></li>
<li><a
href="https://www.cdc.gov/places/measure-definitions/unhealthy-behaviors/index.html">Codebook
2</a></li>
<li><a
href="https://www.cdc.gov/places/measure-definitions/health-outcomes/index.html">Codebook
3</a></li>
</ul></li>
<li><p>Variables of interest:</p>
<ul>
<li><code>High Cholesterol</code>: Prevalence of high cholesterol among
adults aged &gt;=18 years who have been screened in the past 5
years</li>
<li><code>Physical Inactivity</code>: Prevalence of no leisure-time
physical activity among adults aged &gt;=18 years</li>
<li><code>Mental Health</code>: Prevalence of mental health not good for
&gt;=14 days among adults aged &gt;=18 years</li>
<li><code>Physical Health</code>: Prevalence of physical health not good
for &gt;=14 days among adults aged &gt;=18 years</li>
<li><code>High Blood Pressure</code>: Prevalence of high blood pressure
among adults aged &gt;=18 years</li>
</ul></li>
</ul>
<p><em>Note: Cholesterol and blood pressure status is based on physician
diagnosis, physical health, physical inactivity and mental health are
based on self-report</em></p>
<p><br></p>
</div>
</div>
<div id="additional-data-considerations" class="section level3">
<h3>Additional Data Considerations</h3>
<p><br></p>
<div id="spatial-units" class="section level4">
<h4>Spatial units</h4>
<p>For our variables of interest, we selected datasets that contained
spatial (geographic) information. All variables were analyzed at the
<strong>census tract</strong> level, with population sizes ranging from
~1000 to 4000 people.</p>
<p>Since walkability data was provided at a census block level (which is
narrower than the census tract level), we took the average walkability
indices of census blocks within a census tract for analysis for
consistency with geographic data for other variables.</p>
<p>In order to create a <a href="map.html">choropleth map of walkability
scores across the US</a>, we additionally aggregated census tract-level
walkability to the county-level.</p>
<center>
<img src="images/geo_level.png" id="id" class="class"
style="width:50.0%;height:50.0%" />
</center>
<p><br></p>
</div>
<div id="temporality" class="section level4">
<h4>Temporality</h4>
<p>We used the latest 2021 National Walkability Index data, and ACS
demographics and BRFSS health outcomes datasets from 2020.</p>
<p>Though our outcome data precede our exposure data, we believe that
this is acceptable given the specific circumstances surrounding our
data. For one, the EPA National Walkability Index is updated
infrequently; the last major update before 2021 was in <a
href="https://www.epa.gov/sites/default/files/2021-06/documents/epa_sld_3.0_technicaldocumentationuserguide_may2021.pdf">2014</a>.
Since physical neighborhood attributes related to walkability (such as
street density and transit accessibility) change slowly — often over a
span of many years — we argue that walkability data from a nearer year
like 2021 will better capture the physical walking conditions of
neighborhoods in 2020 compared to using an older 2014 version of the
walkability index dataset.</p>
<p>However, we recognize that there is a discrepancy in timing across
datasets, so we plan to limit our analysis to a cross-sectional design
and will interpret our findings with caution.</p>
<p><br></p>
</div>
</div>
<div id="data-cleaning" class="section level3">
<h3>Data Cleaning</h3>
<p><a href="cleaning.html">Click here</a> to access data cleaning
page</p>
<p><br></p>
<div id="walkability-data" class="section level4">
<h4>Walkability Data</h4>
<p>We explored the original dataset from Environmental Protection
Agency’s information on Walkability Index. We first added leading zeros
for all Federal Information Processing Standard (FIPS) codes, which is
the numbers that uniquely identify geographic areas. For the FIPS codes,
we combined state codes, county codes and tract FIPS into an 11-digit
code that is used for future analysis. Then, we selected relevant
variables (FIPS code and National Walkability Index) used in this
project.</p>
<pre class="r"><code>#Added leading zeros for all Federal Information Processing Standard (FIPS) codes
#Combined state, county and tract FIPS into an 11-digit code 
walkability_raw = read_csv(&quot;./data/EPA_SmartLocationDatabase_V3_Jan_2021_Final.csv&quot;)

walkability_new = walkability_raw %&gt;% 
  janitor::clean_names() %&gt;% 
  mutate(statefp = str_pad(statefp, width = 2, pad = &quot;0&quot;),
         countyfp = str_pad(countyfp, width = 3, pad = &quot;0&quot;),
         tractce = str_pad(tractce, width = 6, pad = &quot;0&quot;),
         fips = str_c(statefp, countyfp, tractce, blkgrpce, sep = &quot;&quot;)) %&gt;% 
  select(fips, everything(), -objectid)

#Selected relevant variables
walkability_clean = walkability_new %&gt;% 
  select(fips, statefp, countyfp, tractce, blkgrpce, nat_walk_ind, csa_name) %&gt;% 
  mutate(location_name = str_c(statefp, countyfp, tractce, sep = &quot;&quot;))</code></pre>
</div>
<div id="demographics-data" class="section level4">
<h4>Demographics Data</h4>
<p>We got the geographical related demographic data from The American
Community Survey (ACS) for 2020. We created a census tract column
derived from the geo_id column to match with walkability dataset. Then,
we selected the five demographic variables of interest: age, sex,
race/ethnicity, and median household income.</p>
<pre class="r"><code>## Demographic Data - ACS 2020
### Age, Gender, and Race
demo_raw = read_csv(&quot;./data/ACSDP5Y2020.DP05-Data.csv&quot;)

#removed second row with detailed column names
#removed columns for annotations and margins of error
#created a census tract column derived from the geo_id column (removed the &quot;1400000US&quot; at the beginning of each entry) to match with other data sets
demo_clean = demo_raw %&gt;% 
  slice(-1) %&gt;% 
  janitor::clean_names() %&gt;%
  select(-ends_with(c(&quot;ea&quot;, &quot;m&quot;, &quot;ma&quot;))) %&gt;% 
  mutate(geo_clean = geo_id, 
         geo_clean = str_replace(geo_clean, &quot;^1400000US&quot;, &quot;&quot;)) %&gt;% 
  select(geo_clean, dp05_0002pe, dp05_0003pe, dp05_0021pe, dp05_0037pe, dp05_0038pe, dp05_0039pe, dp05_0044pe, dp05_0058pe, dp05_0071pe)

#### Median household income 
income_raw = read_csv(&quot;./data/ACSST5Y2020.S1903-Data.csv&quot;)

income_clean = income_raw %&gt;% 
  janitor::clean_names() %&gt;%
  select(geo_id, name, s1903_c03_001e) %&gt;% 
  slice(-1) %&gt;% 
  mutate(geo_clean = geo_id, 
         geo_clean = str_replace(geo_clean, &quot;^1400000US&quot;, &quot;&quot;)) %&gt;% 
  select(geo_clean, everything())</code></pre>
</div>
<div id="health-outcomes-data" class="section level4">
<h4>Health Outcomes Data</h4>
<p>We found the health outcomes data related demographic data from
Behavioral Risk Factor Surveillance System (BRFSS) for 2020. We created
a census tract column derived from the geolocation column to match with
walkability dataset. After removed footnote variables, we filtered to
relevant health outcomes: high cholesterol, physical health, blood
pressure, physical inactivity, and mental health.</p>
<pre class="r"><code>## Health Outcome Data - BRFSS
# raw data with all health outcomes
health_df = read_csv(&quot;./data/PLACES__Local_Data_for_Better_Health__Census_Tract_Data_2022_release.csv&quot;)

health_new = health_df %&gt;% 
  janitor::clean_names() %&gt;%
  mutate(location_name = str_pad(location_name, width = 11, pad = &quot;0&quot;),
         geolocation = str_replace(geolocation, &quot;^POINT &quot;, &quot;&quot;),
         geolocation = str_replace(geolocation, &quot;^\\(&quot;, &quot;&quot;),
         geolocation = str_replace(geolocation, &quot;\\)$&quot;, &quot;&quot;)) %&gt;% 
  separate(geolocation, into = c(&quot;lat&quot;, &quot;long&quot;), sep = &quot; &quot;)
  
#### Further cleaning
#For health outcome, we are focusing on 5 outcomes that are likely to be related to walkability 
health_clean = health_new %&gt;% 
  filter(measure_id == c(&quot;BPHIGH&quot;, &quot;PHLTH&quot;, &quot;LPA&quot;, &quot;MHLTH&quot;, &quot;HIGHCHOL&quot;)) %&gt;% 
  select(location_name, lat, long, measure, data_value, data_value_type, data_value_unit, measure_id)</code></pre>
</div>
<div id="cleaned-dataset-for-analysis-use" class="section level4">
<h4>Cleaned Dataset for Analysis Use</h4>
<p>After cleaning all three data sources, we merged the dataset by
geographical locations. Then we outputed the cleaned data as .csv to be
used for data analysis.</p>
<pre class="r"><code>##Merge
# merging walkability and health outcomes
merge1 = full_join(x = walkability_clean, y = health_clean, by = &quot;location_name&quot;)

#mergeing demographic into one df - age&amp;race + median household income
merge2 = full_join(demo_clean, income_clean, by = &quot;geo_clean&quot;)
  
merge2 = merge2 %&gt;% 
  mutate(location_name = geo_clean) 

# merge merge1 and merge2
merge_final = full_join(x = merge1, y = merge2, by = &quot;location_name&quot;)

merge_final = merge_final %&gt;% 
  rename(sex_male = dp05_0002pe,
         sex_female = dp05_0003pe,
         age_18plus = dp05_0021pe,
         race_white = dp05_0037pe,
         race_black = dp05_0038pe,
         race_aian = dp05_0039pe,
         race_asian = dp05_0044pe,
         race_2_plus = dp05_0058pe,
         race_hispanic = dp05_0071pe,
         median_income = s1903_c03_001e) %&gt;% 
  pivot_longer(names_to = &quot;race&quot;,
               values_to = &quot;percent_race&quot;,
               cols = starts_with(&quot;race&quot;),
               names_prefix = &quot;race_&quot;) %&gt;% 
  select(-data_value_type, -data_value_unit)

write_csv(merge_final, &quot;./data/merge_final.csv&quot;)</code></pre>
<p><br> <br></p>
</div>
</div>
</div>
<div id="exploratory-analysis" class="section level2">
<h2>Exploratory analysis</h2>
<p><a href="explore.html">Click here</a> to access exploratory analysis
page(explore.html)</p>
<p>To begin, we explored the associations between various social
demographics, walkability, and health outcomes across the United
States.</p>
<p><br></p>
<div id="demographics-and-walkability" class="section level3">
<h3>Demographics and Walkability</h3>
<p>First, we looked at overall statistics of demographics and
walkability in the United States. The average walkability score,
percentage of female, percentage of male, percentage of adults (age
greater than 18), average median income, percentage of each race, and
percentage of more than 2 races were included in the table 1. Then, we
have the same statistics on the interactive tables showing results for
each state and county in table 2 and table 3. The mean walkability score
is 9.54, which is below average walkable according to the National
Walkability Index score ranging from 1 to 20. The percentage of females
and male is balanced around 50%. The percentage of adults, which is
older than 18 years old, is 78.23%. The average median income in this
dataset is $68,387.44. Regarding race, there are 70.49% White, 17.37%
Hispanic, 13.58% Black, 4.91% Asian, 0.9% American Indian and Alaska
Native, and 4.95% who have more than 2 races. We also plotted the
walkability score for each state in figure 1. The highest walkability
score is from the District of Columbia and the lowest walkability score
is from Puerto Rico.</p>
<Center>
<img src="explore_files/figure-html/unnamed-chunk-5-1.png" id="id"
class="class" style="width:70.0%;height:70.0%" />
</Center>
<pre class="r"><code>#Load library
library(tidyverse)
library(DT)
library(dplyr)
library(ggplot2)
library(ggpmisc)
library(ggpubr)

#Explore using final cleaned data
explore_df = read_csv(&quot;./data/merge_final.csv&quot;)

#Mutate char into num
explore_df = explore_df %&gt;% mutate(sex_female = as.numeric(sex_female), sex_male = as.numeric(sex_male), age_18plus = as.numeric(age_18plus), median_income = as.numeric(median_income), percent_race = as.numeric(percent_race)) %&gt;% separate(name, c(&quot;census_track&quot;,&quot;county&quot;, &quot;state&quot;), &quot;,&quot;)

#Filter out variables needed for demographics
demographics_df = explore_df %&gt;% select(sex_female, sex_male, age_18plus, median_income, race, percent_race, county, state, nat_walk_ind)

#Get overall demographics statistics
overall_demographics = data.frame(
  Variables = c(&quot;Average Walkability Score&quot;, &quot;Percentage of Female&quot;, &quot;Percentage of Male&quot;, &quot;Percentage of Adults&quot;, &quot;Average of Median Income ($)&quot;, &quot;Percentage of White&quot;, &quot;Percentage of Hispanic&quot;, &quot;Percentage of Black&quot;, &quot;Percentage of Asian&quot;, &quot;Percentage of American Indian and Alaska Native&quot;, &quot;Percentage of 2+ Races&quot;),
  Results = c((mean(demographics_df$nat_walk_ind, na.rm = TRUE)),
              (mean(demographics_df$sex_female, na.rm = TRUE)),
              (mean(demographics_df$sex_male, na.rm = TRUE)), 
              (mean(demographics_df$age_18plus, na.rm = TRUE)), 
              (mean(demographics_df$median_income, na.rm = TRUE)), 
              (mean((demographics_df %&gt;% filter(race == &quot;white&quot;))$percent_race, na.rm = TRUE)), 
              (mean((demographics_df %&gt;% filter(race == &quot;hispanic&quot;))$percent_race, na.rm = TRUE)),
              (mean((demographics_df %&gt;% filter(race == &quot;black&quot;))$percent_race, na.rm = TRUE)),
              (mean((demographics_df %&gt;% filter(race == &quot;asian&quot;))$percent_race, na.rm = TRUE)), 
              (mean((demographics_df %&gt;% filter(race == &quot;aian&quot;))$percent_race, na.rm = TRUE)),
              (mean((demographics_df %&gt;% filter(race == &quot;2_plus&quot;))$percent_race, na.rm = TRUE)))
)
overall_demographics = overall_demographics %&gt;% mutate(across(where(is.numeric), ~ round(., 2)))


#Print table
datatable(overall_demographics, 
          rownames = FALSE, 
          caption = htmltools::tags$caption(style = &#39;caption-side: top; text-align: left;&#39;, 
                    &#39;Table 1: &#39;, htmltools::em(&#39;Overall demographics and walkability statistics of the dataset.&#39;)), 
          options = list(dom = &#39;t&#39;, pageLength = 11, columnDefs = list(list(className = &#39;dt-center&#39;, targets = &quot;_all&quot;))))
          

#Filter out state and walkability score
walkability_df = explore_df %&gt;% select(state, nat_walk_ind) %&gt;% group_by(state) %&gt;% summarise_each(funs(mean(., na.rm = TRUE))) 

#Delete NA from states 
walkability_df = walkability_df[!is.na(walkability_df$state),]

#Plot the distribution of walkability
walkability_plot = walkability_df  %&gt;% mutate(state = fct_reorder(state, desc(nat_walk_ind))) %&gt;% ggplot(aes(y = nat_walk_ind, x = state), ordered = TRUE) +
  geom_point(shape = &quot;square&quot;, color = &quot;steelblue&quot;, size = 1, alpha = 0.8) +
  labs(         
    x = &quot;State&quot;,
    y = &quot;Walkability Score&quot;,
    title = &quot;Figure 1. Distribution of walkability score by state&quot;,
    caption = &quot;Dashline represents national average.&quot;) + theme(axis.text.x = element_text(angle = 90, vjust = 0.1, hjust=0.9, size = 7), axis.ticks = element_blank()) + 
  geom_hline(yintercept=9.54, linetype=&quot;dashed&quot;, color = &quot;Navy&quot;)


#Avg of demographics by state
state_demographics = demographics_df %&gt;% 
  group_by(state) %&gt;% 
  summarise_each(funs(mean(., na.rm = TRUE))) %&gt;% 
  select(-c(race, percent_race,county))

#Avg of race by state
state_demographics_race = demographics_df %&gt;% 
  group_by(state, race) %&gt;% 
  summarise_each(funs(mean(., na.rm = TRUE))) %&gt;% 
  select(c(state, race, percent_race)) %&gt;% 
  pivot_wider(names_from = &quot;race&quot;,
               values_from = &quot;percent_race&quot;)

#Merge two dataframe
state_demographics_merge = inner_join(state_demographics, state_demographics_race, by = &quot;state&quot;) %&gt;% 
  mutate(across(where(is.numeric), ~ round(., 2))) %&gt;% 
  relocate(state, nat_walk_ind, sex_female, sex_male, age_18plus, median_income, white, hispanic, black, asian, aian)

#Delete the row with NA
state_demographics_merge = state_demographics_merge[-53,]


#Print table
datatable(state_demographics_merge, 
          rownames = FALSE, 
          colnames = c(&#39;State&#39;, &#39;Average Walkability Score&#39;, &#39;Percentage of Female&#39;, &#39;Percentage of Male&#39;, &#39;Percentage of Adults&#39;, &#39;Average of Median Income ($)&#39;, &#39;Percentage of White&#39;, &#39;Percentage of Hispanic&#39;, &#39;Percentage of Black&#39;, &#39;Percentage of Asian&#39;, &#39;Percentage of American Indian and Alaska Native&#39;, &#39;Percentage of more than 2 Races&#39;),
          caption = htmltools::tags$caption(style = &#39;caption-side: top; text-align: left;&#39;, 
                    &#39;Table 2: &#39;, htmltools::em(&#39;Demographics and walkability statistics of the dataset by state.&#39;)), 
          options = list(order = list(list(2, &#39;desc&#39;)), columnDefs = list(list(className = &#39;dt-center&#39;, targets = &quot;_all&quot;))))


#Avg of demographics by county
county_demographics = demographics_df %&gt;% 
  group_by(county) %&gt;% 
  summarise_each(funs(mean(., na.rm = TRUE))) %&gt;% 
  select(-c(race, percent_race, state))

#Avg of race by county
county_demographics_race = demographics_df %&gt;% 
  group_by(county, race) %&gt;% 
  summarise_each(funs(mean(., na.rm = TRUE))) %&gt;% 
  select(c(county, race, percent_race)) %&gt;% 
  pivot_wider(names_from = &quot;race&quot;,
              values_from = &quot;percent_race&quot;)

#Grab state name
state_name = demographics_df %&gt;% select(c(state,county)) %&gt;% distinct()

#Merge county level data
county_demographics_merge = inner_join(county_demographics, county_demographics_race, by = &quot;county&quot;) %&gt;% 
  mutate(across(where(is.numeric), ~ round(., 2))) 

#Add state name into dataframe
county_demographics_merge = left_join(county_demographics_merge, state_name,by = &quot;county&quot;, all.x = TRUE) %&gt;%
  relocate(county, state, nat_walk_ind, sex_female, sex_male, age_18plus, median_income, white, hispanic, black, asian, aian) %&gt;% drop_na()


#Print table
datatable(county_demographics_merge, 
          rownames = FALSE, 
          colnames = c(&#39;County&#39;, &#39;State&#39;,&#39;Average Walkability Score&#39;, &#39;Percentage of Female&#39;, &#39;Percentage of Male&#39;, &#39;Percentage of Adults&#39;, &#39;Average of Median Income ($)&#39;, &#39;Percentage of White&#39;, &#39;Percentage of Hispanic&#39;, &#39;Percentage of Black&#39;, &#39;Percentage of Asian&#39;, &#39;Percentage of American Indian and Alaska Native&#39;, &#39;Percentage of more than 2 Races&#39;),
          caption = htmltools::tags$caption(style = &#39;caption-side: top; text-align: left;&#39;, 
                    &#39;Table 3: &#39;, htmltools::em(&#39;Demographics and walkability statistics of the dataset by county&#39;)), 
          options = list(
            order = list(list(3, &#39;desc&#39;)),
            columnDefs = list(list(className = &#39;dt-center&#39;, targets = &quot;_all&quot;))))</code></pre>
<p><br></p>
</div>
<div id="health-outcomes" class="section level3">
<h3>Health Outcomes</h3>
<p>Second, we looked at the five health outcomes related to walkability.
The national prevalence of the health outcome, average walkability
score, percentage of female, percentage of male, percentage of adults
(age greater than 18), average median income, percentage of each race,
and percentage of more than 2 races were explored. Below, we report the
prevalence of health outcomes in the United States is shown below:</p>
<ul>
<li>The prevalence of high blood pressure is 32.65%</li>
<li>The prevalence of high cholesterol who have been screened in the
past 5 years is 31.98%</li>
<li>The prevalence of mental health not good for over 14 days is
15.09%</li>
<li>The prevalence of no leisure-time physical activity is 24.68%</li>
<li>The prevalence of physical health not good for over 14 days is
10.80%</li>
</ul>
<p>The average walkability score for all five health outcomes are
similar around 9.5 (below average walkability). Other demographics for
each of the five health outcomes are also similar to the national
average.</p>
<div class="figure">
<img src="images/explore_table.png" id="id" class="class"
style="width:100.0%;height:100.0%" alt="" />
<p class="caption">Health outcomes prevalence on state and county
level</p>
</div>
<pre class="r"><code>#Filter out variables needed for health outcome analysis
health_df = explore_df %&gt;% select(sex_female, sex_male, age_18plus, median_income, race, percent_race, county, state, nat_walk_ind, measure, data_value) %&gt;% 
  group_by(measure) %&gt;% 
  summarise_each(funs(mean(., na.rm = TRUE))) %&gt;% 
  select(-c(race, percent_race, county, state)) 

#Orgnize race info for health outcome analysis
health_df_race = explore_df %&gt;% 
  group_by(measure, race) %&gt;% 
  summarise_each(funs(mean(., na.rm = TRUE))) %&gt;% 
  select(c(measure, race, percent_race)) %&gt;% 
  pivot_wider(names_from = &quot;race&quot;,
              values_from = &quot;percent_race&quot;)

#Merge two dataframes
health_df = inner_join(health_df, health_df_race, by = &quot;measure&quot;) %&gt;% 
  mutate(across(where(is.numeric), ~ round(., 2))) %&gt;% 
  relocate(measure, data_value, nat_walk_ind, sex_female, sex_male, age_18plus, median_income, white, hispanic, black, asian, aian)

#Delete NA health outcome and transpose
health_df = health_df[-6,]
health_df = t(health_df)

#Change row names
rownames(health_df) &lt;- c(&quot;Health Outcome Measurments&quot;,&quot;Prevalence of Health Outcome (%)&quot;,&quot;Average Walkability Score&quot;,&quot;Percentage of Female&quot;, &quot;Percentage of Male&quot;, &quot;Percentage of Adults&quot;, &quot;Average of Median Income ($)&quot;, &quot;Percentage of White&quot;, &quot;Percentage of Hispanic&quot;, &quot;Percentage of Black&quot;, &quot;Percentage of Asian&quot;, &quot;Percentage of American Indian and Alaska Native&quot;, &quot;Percentage of 2+ Races&quot;)

#Dataframe for making the table only
health_df_table = health_df[-1,]

#Print table
datatable(health_df_table, 
          rownames = TRUE, 
          colnames = c(&#39;High blood pressure&#39;, &#39;High cholesterol who have been screened in the past 5 years&#39;,&#39;Mental health not good for over 14 days&#39;, &#39;No leisure-time physical activity&#39;, &#39;Physical health not good for over 14 days&#39;),
          caption = htmltools::tags$caption(style = &#39;caption-side: top; text-align: left;&#39;, 
                    &#39;Table 4: &#39;, htmltools::em(&#39;Overall Health Outcome statistics of the dataset&#39;)), 
          options = list(
            dom = &#39;t&#39;, pageLength = 12,
            columnDefs = list(list(className = &#39;dt-center&#39;, targets = &quot;_all&quot;))))

#Filter out state level health outcome data
health_df_state = explore_df %&gt;% select(sex_female, sex_male, age_18plus, median_income, race, percent_race, county, state, nat_walk_ind, measure, data_value) %&gt;% 
  group_by(state, measure) %&gt;% 
  summarise_each(funs(mean(., na.rm = TRUE))) %&gt;% 
  select(-c(race, percent_race, county))

#Delete rows without health outcome data and combine state/health outcome as one variable
health_df_state = health_df_state[!is.na(health_df_state$measure),]
health_df_state$state_measure &lt;- paste(health_df_state$state, &quot;-&quot;, health_df_state$measure)

#Filter out state level race data
health_df_state_race = explore_df %&gt;% select(race, percent_race, state, measure) %&gt;% 
  group_by(state, measure, race) %&gt;% 
  summarise_each(funs(mean(., na.rm = TRUE))) %&gt;% 
  pivot_wider(names_from = &quot;race&quot;,
              values_from = &quot;percent_race&quot;)

#Delete rows without health outcome data and combine state/health outcome as one variable
health_df_state_race = health_df_state_race[!is.na(health_df_state_race$measure),]
health_df_state_race$state_measure &lt;- paste(health_df_state_race$state, &quot;-&quot;, health_df_state_race$measure)

#Merge race and other data
health_df_merge = inner_join(health_df_state, health_df_state_race, by = &quot;state_measure&quot;) %&gt;% 
  mutate(across(where(is.numeric), ~ round(., 2))) %&gt;% 
  select(-c(state.x, state.y, measure.x, measure.y)) %&gt;% 
  relocate(state_measure, data_value, nat_walk_ind, sex_female, sex_male, age_18plus, median_income, white, hispanic, black, asian, aian)

#Print table
datatable(health_df_merge, 
          rownames = FALSE, 
          colnames = c(&#39;State/Health Outcome&#39;, &#39;Prevalence of Health Outcome (%)&#39;, &#39;Average Walkability Score&#39;, &#39;Percentage of Female&#39;, &#39;Percentage of Male&#39;, &#39;Percentage of Adults&#39;, &#39;Average of Median Income ($)&#39;, &#39;Percentage of White&#39;, &#39;Percentage of Hispanic&#39;, &#39;Percentage of Black&#39;, &#39;Percentage of Asian&#39;, &#39;Percentage of American Indian and Alaska Native&#39;, &#39;Percentage of more than 2 Races&#39;),
          caption = htmltools::tags$caption(style = &#39;caption-side: top; text-align: left;&#39;, 
                    &#39;Table 2: &#39;, htmltools::em(&#39;Demographics and walkability statistics of the dataset by state.&#39;)), 
          options = list(order = list(list(0, &#39;asc&#39;)), columnDefs = list(list(className = &#39;dt-center&#39;, targets = &quot;_all&quot;))))


#Filter out county level health outcome data
health_df_county = explore_df %&gt;% select(sex_female, sex_male, age_18plus, median_income, county, state, nat_walk_ind, measure, data_value) %&gt;% 
  group_by(state, county, measure) %&gt;% 
  summarise_each(funs(mean(., na.rm = TRUE)))

#Delete rows without health outcome data and combine county/state/health outcome as one variable
health_df_county = health_df_county[!is.na(health_df_county$measure),]
health_df_county$state_measure &lt;- paste(health_df_county$county, &quot;-&quot;, health_df_county$state, &quot;-&quot;, health_df_county$measure)

#Filter out county level race data
health_df_county_race = explore_df %&gt;% select(race, percent_race, county, state, measure) %&gt;% 
  group_by(county, state, measure, race) %&gt;% 
  summarise_each(funs(mean(., na.rm = TRUE))) %&gt;% 
  pivot_wider(names_from = &quot;race&quot;,
              values_from = &quot;percent_race&quot;)

#Delete rows without health outcome data and combine county/state/health outcome as one variable
health_df_county_race = health_df_county_race[!is.na(health_df_county_race$measure),]
health_df_county_race$state_measure &lt;- paste(health_df_county_race$county, &quot;-&quot;, health_df_county_race$state, &quot;-&quot;, health_df_county_race$measure)

#Merge two datasets
health_df_merge2 = inner_join(health_df_county, health_df_county_race, by = &quot;state_measure&quot;) %&gt;% 
  mutate(across(where(is.numeric), ~ round(., 2))) %&gt;% 
  select(-c(state.x, state.y, measure.x, measure.y, county.x, county.y)) %&gt;% 
  relocate(state_measure, data_value, nat_walk_ind, sex_female, sex_male, age_18plus, median_income, white, hispanic, black, asian, aian)


#Print table
datatable(health_df_merge2, 
          rownames = FALSE, 
          colnames = c(&#39;County/State/Health Outcome&#39;, &#39;Prevalence of Health Outcome (%)&#39;, &#39;Average Walkability Score&#39;, &#39;Percentage of Female&#39;, &#39;Percentage of Male&#39;, &#39;Percentage of Adults&#39;, &#39;Average of Median Income ($)&#39;, &#39;Percentage of White&#39;, &#39;Percentage of Hispanic&#39;, &#39;Percentage of Black&#39;, &#39;Percentage of Asian&#39;, &#39;Percentage of American Indian and Alaska Native&#39;, &#39;Percentage of more than 2 Races&#39;),
          caption = htmltools::tags$caption(style = &#39;caption-side: top; text-align: left;&#39;, 
                    &#39;Table 2: &#39;, htmltools::em(&#39;Demographics and walkability statistics of the dataset by state.&#39;)), 
          options = list(order = list(list(0, &#39;asc&#39;)), columnDefs = list(list(className = &#39;dt-center&#39;, targets = &quot;_all&quot;))))</code></pre>
<p><br></p>
</div>
<div id="correlation-with-walkability" class="section level3">
<h3>Correlation with Walkability</h3>
<p>We also created exploratory plots between demographics and
walkability, as well as between health outcomes and walkability, to help
guide our future analysis.</p>
<pre class="r"><code>library(png)
library(grid)
library(gridExtra)
img1 &lt;-  rasterGrob(as.raster(readPNG(&quot;explore_files/figure-html/unnamed-chunk-17-1.png&quot;)), interpolate = FALSE)
img2 &lt;-  rasterGrob(as.raster(readPNG(&quot;explore_files/figure-html/unnamed-chunk-19-1.png&quot;)), interpolate = FALSE)
img3 &lt;-  rasterGrob(as.raster(readPNG(&quot;explore_files/figure-html/unnamed-chunk-21-1.png&quot;)), interpolate = FALSE)
img4 &lt;-  rasterGrob(as.raster(readPNG(&quot;explore_files/figure-html/unnamed-chunk-23-1.png&quot;)), interpolate = FALSE)
grid.arrange(img1, img2, img3, img4, ncol = 2, nrow = 2)</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p><img src="explore_files/figure-html/unnamed-chunk-25-1.png" id="id"
class="class" style="width:85.0%;height:85.0%" /></p>
<pre class="r"><code>gender_walk_plot = county_demographics_merge %&gt;% ggplot(mapping = aes(x = sex_female, y = nat_walk_ind)) +
  geom_point(shape = &quot;diamond&quot;, color = &quot;steelblue&quot;, size = 2, alpha = 0.5) + labs(         
    x = &quot;Percentage of Female&quot;,
    y = &quot;Walkability Score&quot;,
    title = &quot;Figure 2. Percentage of Female vs. Walkability Score by County&quot;) + 
  geom_smooth(                  
    formula = y ~ x,              
    method = &quot;lm&quot;,        
    size = 1, color = &quot;beige&quot;, alpha = 0.5) + 
  stat_cor(p.accuracy = 0.001, r.accuracy = 0.01)


age_walk_plot = county_demographics_merge %&gt;% ggplot(mapping = aes(x = age_18plus, y = nat_walk_ind))+
  geom_point(shape = &quot;diamond&quot;, color = &quot;steelblue&quot;, size = 2, alpha = 0.5) + labs(         
    x = &quot;Percentage of Adults&quot;,
    y = &quot;Walkability Score&quot;,
    title = &quot;Figure 3. Percentage of Adults vs. Walkability Score by County&quot;) + 
  geom_smooth(                
    formula = y ~ x,
    method = &quot;lm&quot;,        
    size = 1, color = &quot;beige&quot;, alpha = 0.5) + 
  stat_cor(p.accuracy = 0.001, r.accuracy = 0.01)


income_walk_plot = county_demographics_merge %&gt;% ggplot(mapping = aes(x = median_income, y = nat_walk_ind))+
  geom_point(shape = &quot;diamond&quot;, color = &quot;steelblue&quot;, size = 2, alpha = 0.5) + labs(         
    x = &quot;Average of Median Income ($)&quot;,
    y = &quot;Walkability Score&quot;,
    title = &quot;Figure 4. Average of Median Income vs. Walkability Score by County&quot;) + 
  geom_smooth(                  
    formula = y ~ x,              
    method = &quot;lm&quot;,        
    size = 1, color = &quot;beige&quot;, alpha = 0.5) + 
  stat_cor(p.accuracy = 0.001, r.accuracy = 0.01)


race_walk_plot = county_demographics_merge %&gt;% ggplot(mapping = aes(x = white, y = nat_walk_ind))+
  geom_point(shape = &quot;diamond&quot;, color = &quot;steelblue&quot;, size = 2, alpha = 0.5) + labs(         
    x = &quot;Percentage of White&quot;,
    y = &quot;Walkability Score&quot;,
    title = &quot;Figure 5. Percentage of White vs. Walkability Score by County&quot;) + 
  geom_smooth(                      
    formula = y ~ x,          
    method = &quot;lm&quot;,        
    size = 1, color = &quot;beige&quot;, alpha = 0.5) + 
  stat_cor(p.accuracy = 0.001, r.accuracy = 0.01)


health_walk_plot = health_df_county %&gt;% ggplot(mapping = aes(x = data_value, y = nat_walk_ind, color = measure)) + geom_point(shape = &quot;diamond&quot;, size = 2, alpha = 0.5, show.legend = FALSE) + labs(         
    x = &quot;Prevalence of Health Outcome (%)&quot;,
    y = &quot;Walkability Score&quot;,
    title = &quot;Figure 6. Prevalence of Health Outcome vs. Walkability Score&quot;) + scale_color_brewer(palette = &quot;Spectral&quot;) + 
  stat_cor(p.accuracy = 0.001, r.accuracy = 0.01, show.legend = FALSE, label.x.npc = 0.8)</code></pre>
<p><br></p>
</div>
</div>
<div id="mapping-walkability" class="section level2">
<h2>Mapping Walkability</h2>
<p><br></p>
<div id="interactive-map-with-national-walkability-index"
class="section level3">
<h3>Interactive Map with National Walkability Index</h3>
<p><a href="map.html">Click here</a> to access Interactive Map with
National Walkability Index</p>
<p><br></p>
<div id="map-overview" class="section level4">
<h4>Map Overview</h4>
<p>For the National Walkability Index, we wanted to go beyond the <a
href="https://www.arcgis.com/home/webmap/viewer.html?url=https%3A%2F%2Fgeodata.epa.gov%2Farcgis%2Frest%2Fservices%2FOA%2FWalkabilityIndex%2FMapServer&amp;source=sd">EPA’s
current Walkability Map</a> and created an interactive spatial
visualization — a <a href="map.html">choropleth map</a> that
demonstrates county-level walkability scores and the health outcomes
prevalence. We utilized many geographic information systems (GIS)
concepts and synthesized skills learned from both the Data Science I
(BIOST P8105) and Public Health GIS (EHSC P8371) courses that we’re
taking in the creation of this spatial visualization.</p>
<p><img src="images/overall_map.png" id="id" class="class"
style="width:65.0%;height:65.0%" /></p>
<p>To create our interactive choropleth map, we first obtained a US-wide
county-level .json file from this <a
href="https://raw.githubusercontent.com/plotly/datasets/master/geojson-counties-fips.json">website</a>
and assigned the .json file to an R object for future use. This base map
allows us to fill a layer with a variable to demonstrate the walkability
index across the US. We then used the <a
href="https://cran.r-project.org/web/packages/sf/index.html"><code>sf</code>
package</a> to set up the geographic projection of the map —
transforming the spatial data from 3D to 2D — using the Albers map
projection, which is a commonly used map projection in GIS.</p>
<p>After preparing the base map structure, we made use of our project’s
tidied dataset <code>merge_final</code> (see the “Data Sources and
Cleaning” section of this report for more) and set it up for mapping.
Since the National Walkability Index is measured on the census tract
block level, displaying on such a level is not as informative as
displaying the index on the county level. Therefore, we used the
county-FIPS code to group the census tract block within each county and
aggregated the original census tract-level walkability scores by
calculating the mean walkability index at the county-level.</p>
<p>Beyond the National Walkability Index, we also wanted our interactive
map to display other information, including descriptive statistics of
various health outcomes for each county. In particular, we focused on
the prevalence of: high cholesterol, physical inactivity, mental health,
physical health, and high blood pressure. For mapping purposes, we
approached these five health outcomes in a similar manner to how we
aggregated the walkability index, grouping by county-FIPS and
summarizing the mean percentage of each health outcome at the
county-level.</p>
<p>Next, we merged the two dataframes using full join and joined by the
commonly shared county FIPS code. Prior to mapping, we made a variable
that contains all the information (i.e., displaying variables names for
walkability index and the five health outcome percentages) for hovering
text legend in the interactive map.</p>
<pre class="r"><code>library(rjson)
library(leaflet)
library(tidyverse)
library(plotly)

# Read in cleaned datafile
walkability = read_csv(&quot;./data/merge_final.csv&quot;)

# Get the county-level .json file from the web
url = &#39;https://raw.githubusercontent.com/plotly/datasets/master/geojson-counties-fips.json&#39;

counties = rjson::fromJSON(file = url)

# Set up the geographic projection for the map 
g = list(scope = &#39;usa&#39;,
         projection = list(type = &#39;albers usa&#39;))

# Get the df for mean of walkability index by county
index_by_county = walkability %&gt;% 
  mutate(fips_county = str_c(statefp, countyfp)) %&gt;% 
  group_by(fips_county) %&gt;% 
  summarise(ind_mean = round(mean(nat_walk_ind), 1))

# Get the df for mean of health outcome prevalence by county
hover_test_df = walkability %&gt;%
  mutate(fips_county = str_c(statefp, countyfp)) %&gt;% 
  group_by(fips_county, measure_id) %&gt;%
  summarise(county_hlth = round(mean(data_value, na.rm = TRUE), 1)) %&gt;%
  pivot_wider(names_from = &quot;measure_id&quot;, values_from = &quot;county_hlth&quot;) %&gt;% 
  janitor::clean_names()

# Merge the two df by county-level FIPS
walkability_map = full_join(x = index_by_county, y = hover_test_df, by = &quot;fips_county&quot;)

# Adding variable for hovertext
walkability_map$hover &lt;- with(walkability_map, 
                            paste(&#39;&lt;br&gt;&#39;,
                                  &quot;National Walkability Index (by County):&quot;, ind_mean, &#39;&lt;br&gt;&#39;, 
                                  &quot;% Health Outcomes (by County)&quot;, &#39;&lt;br&gt;&#39;,
                                  &quot;High Cholesterol:&quot;, highchol, &#39;&lt;br&gt;&#39;,
                                  &quot;Physical Inactivity:&quot;, lpa, &#39;&lt;br&gt;&#39;,
                                  &quot;Mental Health:&quot;, mhlth, &#39;&lt;br&gt;&#39;,
                                  &quot;Physical Health:&quot;, phlth, &#39;&lt;br&gt;&#39;,
                                  &quot;High Blood Pressure:&quot;, bphigh))

# Choropleth with hovertext of health outcomes by county by plotly
choropleth_map = plot_ly()

choropleth_map = choropleth_map %&gt;% 
  add_trace(type = &quot;choropleth&quot;,
            geojson = counties,
            locations = walkability_map$fips_county,
            z = walkability_map$ind_mean,
            text = walkability_map$hover,
            colorscale = &quot;Viridis&quot;,
            reversescale = T, #to get reverse color scheme
            zmin = 1,
            zmax = 16,
            marker = list(line = list(width = 0)))

choropleth_map = choropleth_map %&gt;%
  layout(title = &quot;National Walkability Index in the US&quot;)

choropleth_map = choropleth_map %&gt;% 
  layout(geo = g)

choropleth_map</code></pre>
<p>Finally, we mapped the walkability index with information about the
percentage of five health outcomes using <code>plot_ly</code>. The map
we created is a choropleth map and the location indicator is the county
FIPS code. The variable that we demonstrated is the walkability index
using the reversed viridis color scheme and we used the geographic
projection we created earlier.</p>
<p>As you place the mouse over a county on the map, the hovering textbox
displays the walkability index and the five health outcome percentages.
We tried adding the county name into the hovering textbox but the .html
file became too large to push to GitHub. Regardless, we hope this map is
informative in showing the geographic variability of the National
Walkability Index and various health outcomes across the US.</p>
<p><img src="images/hover.png" id="id" class="class"
style="width:65.0%;height:65.0%" /></p>
<p><br></p>
</div>
<div id="map-highlights" class="section level4">
<h4>Map Highlights</h4>
<p>In our interactive map, the walkability index ranges from 1 to 16,
with darker colors representing a higher walkability index and lighter
colors representing a lower walkability index. Visually, most of the
cities in the US have a relatively lower walkability index while most
major metropolitan areas have a higher walkability index.</p>
<p>Compared to the <a
href="https://www.arcgis.com/home/webmap/viewer.html?url=https%3A%2F%2Fgeodata.epa.gov%2Farcgis%2Frest%2Fservices%2FOA%2FWalkabilityIndex%2FMapServer&amp;source=sd">EPA’s
National Walkability Map</a>, our interactive map provides additional
information about the percentage of selective health outcomes. This
interactive display of both walkability scores and various health
outcomes across the US can be helpful for various audiences who might
want to look at the spatial distribution of both simultaneously.</p>
<p><br> <br></p>
</div>
</div>
</div>
<div id="regression-analysis" class="section level2">
<h2>Regression analysis</h2>
<p><br></p>
<div id="variable-preparation" class="section level3">
<h3>Variable Preparation</h3>
<p>To ease interpretation, the walkability score was dichotomized
according to <a
href="https://www.epa.gov/sites/default/files/2021-06/documents/national_walkability_index_methodology_and_user_guide_june2021.pdf">cutoff
values</a> provided by EPA, where values above 10.5 are classified as
“More Walkable”, and those below as “Less Walkable”. Sociodemographic
variables</p>
<p><br></p>
</div>
<div id="methodology" class="section level3">
<h3>Methodology</h3>
<p>We utilized beta regression to model the relationship between health
outcomes with the dichotomized walkability variable, controlling for
sociodemographic variables.</p>
<p>We chose this regression method as the outcome variable is in
proportions, and thus takes the form of a continuous value bounded
between 0 and 1. The R package <code>betareg</code> was used to
implement this method, while the <code>betamfx</code> command under the
<code>mfx</code> package was used to obtain the changes in marginal
probabilities on the outcome resulting from changes in the predictor. We
will report both numbers, however, we will be interpreting the marginal
probabilities for its more direct relevance to the real world.</p>
<p><br></p>
</div>
<div id="results" class="section level3">
<h3>Results</h3>
<p><img src="images/forest.png" id="id" class="class"
style="width:85.0%;height:85.0%" /></p>
<p>Here, we see that more walkable places have the following change in
prevalence for a health outcome compared to less walkable places:</p>
<ul>
<li>0.127% increase in poor mental health</li>
<li>0.206% decrease in no physical activity</li>
<li>0.627% decrease in poor physical health</li>
<li>3.226% decrease in poor cholesterol</li>
<li>4.367% decrease in poor blood pressure</li>
</ul>
<p>Therefore, increase in walkability is associated with decreased
prevalence of poor physical health outcomes, which is expected. However,
an increase in walkability is associated with an increase for prevalence
of poor mental health, but this could be due to unaccounted for
confounding from density of space and urbanicity that comes with more
walkable spaces.</p>
<p><br> <br></p>
</div>
</div>
<div id="spatial-clustering-analysis" class="section level2">
<h2>Spatial Clustering Analysis</h2>
<p>[Click here] to access NYC spatial clustering analysis(map.html) To
further understand the National Walkability Index in a smaller spatial
unit, we narrowed our exploration down to New York City, where us five
walkaholics reside. To gain a general understanding of the walkability
index in NYC, we started by creating a descriptive choropleth map on the
census tract level. We focused on the Bronx, Kings (Brooklyn), New York,
Queens, and Richmond (Staten Island) Counties in New York.</p>
<p><br></p>
<div id="new-york-city-descriptive-choropleth-map-for-walkability"
class="section level3">
<h3>New York City Descriptive Choropleth Map for Walkability</h3>
<p>We created a choropleth map to visually observe the walkability index
distribution in NYC. First, we created a shapefile that contained all of
the information we needed, including: the walkability index, health
outcomes prevalence, demographics prevalence, the geographic identifier
(i.e., FIPS code), and the map shapefile. The map shapefile for the US
is available from the <a
href="https://www2.census.gov/geo/tiger/GENZ2020/shp/">US Census
Bureau</a>, and we made use of open-source spatial mapping software, <a
href="https://qgis.org/en/site/">QGIS</a>, to merge the <a
href="cleaning.html">cleaned dataset</a> with the US map shapefile.
After exporting this new combined shapefile from QGIS, we used functions
from <a
href="https://cran.r-project.org/web/packages/sf/index.html"><code>sf</code></a>
package to read in the shapefile and turned it into a dataframe in our
RProject. After that, we tidied this new dataset by including the five
counties in NYC and removed census tracts which did not contain any
information for walkability index.</p>
<p>Next, we used the functions from <a
href="https://cran.r-project.org/web/packages/tmap/vignettes/tmap-getstarted.html"><code>tmap</code></a>
to build our descriptive choropleth map, using a basemap for New York
City and adding a map layer displaying 5 equal-interval levels of the
National Walkability Index.</p>
<p><img src="images/choropleth_map.png" id="id" class="class"
style="width:60.0%;height:60.0%" /></p>
<p>From this choropleth map, we can see that New York City is very
walkable overall. However, we wanted to further identify census tracts
which are statistically significant hot spots, cold spots, and spatial
outliers for walkability by using clustering analysis.</p>
<pre class="r"><code>library(sf)
library(tmap)
library(tidyverse)
library(leaflet)
library(shinyjs)

# Read-in shapefile
choropleth_NYC &lt;- st_read(&quot;./data/cluster_analysis/map_with_everything.shp&quot;, quiet = TRUE)

# Clean up and filter
choropleth_NYC = choropleth_NYC %&gt;% 
  janitor::clean_names() %&gt;% 
  mutate(nat_walk_i = as.numeric(nat_walk_i),
        nat_walk_i = round(nat_walk_i, digits = 1)) %&gt;% 
  filter(stusps == &quot;NY&quot;,
         namelsadco %in% c(&quot;Bronx County&quot;, &quot;Kings County&quot;, &quot;New York County&quot;, &quot;Queens County&quot;, &quot;Richmond County&quot;)) %&gt;% 
  rename(median_income = s1903_c03) %&gt;% 
  mutate(median_income = as.numeric(median_income))

choropleth_NYC = choropleth_NYC[!is.na(choropleth_NYC$nat_walk_i),]

# Time to map
tmap_mode(&quot;view&quot;)

tm_basemap(&quot;CartoDB.Positron&quot;) +
  tm_shape(choropleth_NYC) +
  tm_polygons(col = &quot;nat_walk_i&quot;, 
              style = &quot;fisher&quot;,
              n = 5,
              title = &quot;National Walkability Index&quot;,
              palette = (&quot;Greens&quot;))</code></pre>
<p><br></p>
</div>
<div id="clustering-analysis-for-walkability" class="section level3">
<h3>Clustering Analysis for Walkability</h3>
<div id="local-morans-i-for-spatial-clustering" class="section level4">
<h4>Local Moran’s I for Spatial Clustering</h4>
<p>To find hot spots, cold spots, and spatial outliers of walkability
index in NYC using clustering analysis, we should start by understanding
some basic spatial analysis terminology and concepts:</p>
<ul>
<li>Hot spots/high positive clusters, refereed as
<strong>High-High</strong>: census tracts that are high in walkability
are surround by census tracts with high walkability index</li>
<li>Cold spots/low positive clusters, referred as
<strong>Low-Low</strong>: census tracts that are low in walkability are
surround by census tracts with low walkability index</li>
<li>Spatial outliers:
<ul>
<li><strong>High-Low</strong>: census tracts that are high in
walkability are surround by census tracts with low walkability
index</li>
<li><strong>Low-High</strong>: census tracts that are low in walkability
are surround by census tracts with high walkability index</li>
</ul></li>
</ul>
<p>To identify these clusters, we will be using a statistical test
called <a href="https://en.wikipedia.org/wiki/Moran%27s_I">local Moran’s
I</a>. The local spatial statistic Moran’s I is calculated for each
census tract based on the spatial weights matrix used (see below for
more on the Queen’s first order contiguity matrix that we used). The
test follows Z distribution, and may be used as a diagnostic tool to
identify where spatial clustering is present. The test status is:</p>
<p><img src="images/cluster.png" id="id" class="class"
style="width:65.0%;height:65.0%" /></p>
<p>Essentially, the local Moran’s I tells us about the local indicator
of spatial association (LISA) statistic. We will use these LISA cluster
indicators to map different walkability clusters in NYC.</p>
<pre class="r"><code>library(rgeoda)
library(sf)
library(tmap)
library(tidyverse)
library(leaflet)

# Read-in files
cluster_map &lt;- st_read(&quot;./data/cluster_analysis/map_with_everything.shp&quot;, quiet = TRUE)

# Clean up and filter
cluster_map_clean = cluster_map %&gt;% 
  janitor::clean_names() %&gt;% 
  mutate(nat_walk_i = as.numeric(nat_walk_i),
         nat_walk_i = round(nat_walk_i, digits = 1)) %&gt;% 
  filter(stusps == &quot;NY&quot;,
         namelsadco %in% c(&quot;Bronx County&quot;, &quot;Kings County&quot;, &quot;New York County&quot;, &quot;Queens County&quot;, &quot;Richmond County&quot;)) %&gt;% 
    rename(sex_male = dp05_0002p,
           sex_female = dp05_0003p,
           age_18plus = dp05_0021p,
           race_white = dp05_0037p,
           race_black = dp05_0038p,
           race_aian = dp05_0039p,
           race_asian = dp05_0044p,
           race_2_plus = dp05_0058p,
           race_hispanic = dp05_0071p,
           median_income = s1903_c03) %&gt;% 
  mutate(median_income = as.numeric(median_income))

cluster_map_walkability = cluster_map_clean[!is.na(cluster_map_clean$nat_walk_i),]
  
# Queen 1st order weights matrix 
queen_w &lt;- queen_weights(cluster_map_walkability, order = 1)

# Local Moran&#39;s I
lisa &lt;- local_moran(queen_w, cluster_map_walkability[&quot;nat_walk_i&quot;],
                    permutations = 9999)

# Get cluster column and join it to shp
cluster_map_walkability$cluster &lt;- as.factor(lisa$GetClusterIndicators())
str(cluster_map_walkability)

# Add labels to clusters
levels(cluster_map_walkability$cluster) &lt;- lisa$GetLabels()

# We want the GeoDa colors
lisa_colors &lt;- lisa_colors(lisa)

# Recode clusters using tidyverse (dyplr)
cluster_map_walkability %&gt;% 
  mutate(cluster = recode_factor(.x = cluster,
                                  `Undefined` = &quot;Not significant&quot;,
                                  `Isolated` = &quot;Not significant&quot;)) -&gt; cluster_map_walkability

# Map the clusters with a basemap
tmap_mode(&quot;view&quot;)

tm_basemap(&quot;CartoDB.Positron&quot;) +
  tm_shape(cluster_map_walkability) +
  tm_polygons(col = &quot;cluster&quot;, 
              palette =  c(&quot;#eeeeee&quot;, 
                      &quot;#FF0000&quot;,
                      &quot;#0000FF&quot;,
                      &quot;#a7adf9&quot;,
                      &quot;#f4ada8&quot;),
              alpha = .8,
              title = &quot;Clusters&quot;,
              border.col = &quot;black&quot;,
              border.alpha = .9) </code></pre>
<p><br></p>
</div>
<div id="conducting-local-morans-i" class="section level4">
<h4>Conducting Local Moran’s I</h4>
<p>To conduct the local Moran’s I test, we need to specify the spatial
weights by defining <em>neighborhood connectivity</em>. <em>Neighborhood
connectivity</em> involves identifying the nearest census tract(s)
around a specific census tract. We used the <a
href="https://geodacenter.github.io/workbook/4a_contig_weights/lab4a.html#queen-contiguity">Queen’s
first order contiguity</a> to establish neighborhood connectivity in our
analysis.</p>
<p>If a census tract is within the threshold distance of the selected
census tract, a 1 is given, otherwise a 0 is given. Neighborhoods are
created based on which observations are judged “contiguous”.</p>
<p>Queen’s first order contiguity suggests that, if a census tract
shares a vertex or a line segment with the selected census tract of
interest, it is given a weight of 1 (i.e. adjacent census tracts are
treated as neighbors); otherwise, the census tracts are given a value 0
(i.e. non-adjacent census tracts are not treated as neighbors).</p>
<p><img src="images/moranI.jpg" id="id" class="class"
style="width:60.0%;height:60.0%" /></p>
<p>Clearly defining neighborhood connectivity is necessary for
conducting the cluster analysis and defining groups of neighboring
tracts which display similar walkability scores.</p>
<p>Based on these foundations for local Moran’s I, we made our cluster
map by using functions from the <code>rgeoda</code> package. We began by
defining neighborhood connectivity utilizing a Queen 1st order weights
matrix and ran the local Moran’s I test with 9,999 permutations. The
subsequent cluster analysis results from the local Moran’s I test were
then compiled into a dataframe; and clusters were categorized
accordingly as: high-high, low-low, high-low, and low-high, and
non-significant. From these results, we finally created a map displaying
spatial clustering of walkability index scores in NYC, using
<code>plotly</code> functions and a color scheme that is commonly used
in spatial clustering analysis.</p>
<p><br></p>
</div>
</div>
<div id="map-highlights-importance" class="section level3">
<h3>Map Highlights &amp; Importance</h3>
<p>Looking at Manhattan, we can see that there are several High-High
clusterings (i.e., census tracts that are high in walkability are
surrounded by census tracts with high walkability index) in the Midtown
and SOHO area. Some parts of Queens, such as Flushing and Forest Hills,
also indicate a High-High clustering.</p>
<p>However, part of the Bronx shows the Low-Low clustering, where census
tracts that are low in walkability are surrounded by census tracts with
low walkability index. The Low-Low clustering in Brooklyn, on the other
hand, might be due to the location of the JFK airport.</p>
<p>You might be wondering, what is the importance of finding these
statistically significant hot spots and cold spots of walkability at the
census tract level?</p>
<p>Reflecting back to the primary goal of the project, which is to
highlight the connections between walkability, the built environment,
and community-level health, identifying these clusters can help policy
makers to put their attention on those Low-Low areas. The High-High
neighborhoods are doing a good job in building a walkable environment
and the Low-Low areas will benefit a lot by improving built environment
infrastructure to make the community more walkable for all.</p>
<p><br> <br></p>
</div>
<div id="dashboard" class="section level3">
<h3>Dashboard</h3>
<p>To get a better understanding of the walkability, demographics and
health outcomes, we created a dashboard looking at our variables of
interest within counties of New York State.</p>
<p>At the top, there is an interactive plot showing stacked mean
prevalence of health outcomes (as bars on the primary y-axis on the
left) and mean walkability index (as points on the secondary y-axis on
the right) for each county, as well as the EPA’s categorization of
walkability indices.</p>
<p>At the bottom, there are plots showing the prevalence of demographic
indicators for each county along with the walkability scores for
reference.</p>
<p><br></p>
<div id="steps" class="section level4">
<h4>Steps</h4>
<p>We split the name variable into separate census tract, county and
state variables on the complete walkability dataset, and then filtered
the state variable to only look at New York State.</p>
<p>For all plots, we grouped the filtered data by county and the
relevant variable and got the mean values of each variable by county,
and plotted bars on plotly. We then added the county average walkability
index as points for reference.</p>
<p><br></p>
</div>
<div id="dashboard-highlights" class="section level4">
<h4>Dashboard Highlights</h4>
<p>From the plot with health outcomes, there doesn’t seem to be any
association between walkability index and any of the health outcomes for
the counties in New York State, i.e., all health outcomes (poor physical
health, poor mental health, no leisure physical activity, high
cholesterol and high blood pressure) are rather equally distributed
across New York State counties,and are not related to walkability
index.</p>
<p>From the plot with race, it is important to first note that the sum
of race proportions for most counties exceeds 100%. This is expected
however, as survey participants can select more than one race.
Regardless, this plot shows that counties with more diverse racial
compositions seem to have higher walkability indices.</p>
<p>From the plot with median household income, while the distribution of
lower income values is scattered rather evenly across irrespective of
walkability index, one interesting finding is that counties with median
household income exceeding $100,000 have higher walkability indices. One
explanation is that it could indicate that more walkable counties are
more desirable, leading to higher property prices, thus only those with
higher incomes can afford to live there.</p>
<p>From the plots showing sex and age, it can be seen that the
distribution of sex and adults is uniform across New York state
counties, and does not vary with walkability index.</p>
<p><br> <br></p>
</div>
</div>
</div>
<div id="discussion" class="section level2">
<h2>Discussion</h2>
<p><br></p>
<div id="findings" class="section level3">
<h3>Findings</h3>
<p>The main purpose of EDA is to explore the overall demographics,
walkability and health outcome across geographical regions in the United
States.</p>
<ul>
<li>The US mean walkability score is 9.54, which is below average
walkable according to the National Walkability Index score ranging from
1 to 20.</li>
<li>The highest average walkability score is from the District of
Columbia and the lowest average walkability score is from Puerto
Rico.</li>
<li>Here is a table showing the health outcome prevalence on the
state-level and county-level.</li>
</ul>
<p><img src="images/explore_table.png" id="id" class="class"
style="width:90.0%;height:90.0%" /></p>
<p>In the statistical analysis, we explored how walkability is
correlated with health outcomes at the national level. We utilized beta
regression to model the relationship between health outcomes with the
dichotomized walkability variable, controlling for sociodemographic
variables of prevalence of age 18+, males, Black individuals, and median
income. We found that, more walkable places have the following
difference in prevalence for a particular health outcome compared to
less walkable places:</p>
<ul>
<li>1.690% increase in physical activity</li>
<li>0.568% increase in good mental health</li>
<li>0.396% increase in good physical health</li>
<li>2.133% decrease in high cholesterol</li>
<li>2.359% decrease in high blood pressure</li>
</ul>
<p>Therefore, we concluded that:</p>
<ul>
<li>Increase in walkability is associated with decreased prevalence of
poor health outcomes, which is expected.</li>
<li>However, an increase in walkability is associated with an increase
for prevalence of poor mental health, but this could be due to
unaccounted for confounding from density of space and urbanicity that
comes with more walkable spaces.</li>
</ul>
<p><br></p>
<p>In the choropleth walkability map and clustering analysis, we
explored the National Walkability Index at the county-level across the
United States. Also, we will take a closer look at the walkability in
New York City and conduct exploratory spatial data analysis. In our
interactive map, we observed that most of the cities in the US have a
relatively lower walkability index while most major metropolitan areas
have a higher walkability index. Compared to the <a
href="https://www.arcgis.com/home/webmap/viewer.html?url=https%3A%2F%2Fgeodata.epa.gov%2Farcgis%2Frest%2Fservices%2FOA%2FWalkabilityIndex%2FMapServer&amp;source=sd">EPA’s
National Walkability Map</a>, our interactive map provides additional
information about the percentage of selective health outcomes. This
interactive display of both walkability scores and various health
outcomes across the US can be helpful for various audiences who might
want to look at the spatial distribution of both simultaneously.</p>
<p><br></p>
<p>In the NYC cluster spatial analysis, we map the different clustering
of walkability in NYC using Queen’s first order contiguity and local
Moran’s I. Considerting the hot spots (i.e., High-High) and the cold
spots (i.e., Low-Low), we found that:</p>
<ul>
<li>In Manhattan, there are several High-High clusterings (i.e., census
tracts that with walkability that are surrounded by census tracts with a
high walkability index) in the Midtown and SOHO area.</li>
<li>Some parts of Queens, such as Flushing and Forest Hills, also
indicates a High-High clustering.</li>
<li>Parts of the Bronx shows the Low-Low clustering, where census tracts
that are low in walkability are surrounded by census tracts with low
walkability index.</li>
<li>The Low-Low clustering in Brooklyn, on the other hand, might be due
to the location of the JFK airport.</li>
</ul>
<p>This suggests that, the High-High neighborhoods are doing a good job
in building a walkable environment and the Low-Low areas will benefit a
lot by improving built environment infrastructure to make the community
more walkable for all.</p>
<p><br></p>
<p>In the dashboard, to get a better understanding of the walkability,
demographics and health outcomes, we created a dashboard looking at our
variables of interest within counties of New York State.</p>
<p>Here are some highlights:</p>
<ul>
<li>All health outcomes (poor physical health, poor mental health, no
leisure physical activity, high cholesterol and high blood pressure) are
rather equally distributed across New York State counties,and are not
related to walkability index.</li>
<li>Counties with median household income exceeding $100,000 have higher
walkability indices.
<ul>
<li>One expalanation is that it could indicate that more walkable
counties are more desirable, leading to higher property prices, thus
only those with higher incomes can afford to live there.</li>
</ul></li>
</ul>
<p><br></p>
</div>
<div id="project-obstacles" class="section level3">
<h3>Project Obstacles</h3>
<div id="big-dataset-and-data-pre-processing" class="section level5">
<h5>1. Big dataset and data pre-processing</h5>
<p>All the raw dataset we retrieved from the website were large
(measuring in hundreds of megabytes) and it was hard to find the piece
of information we needed for the project. We had to spend some time
identifying the correct data source. Additionally, finding data that
were measured in the same geographical unit was challenging.
Fortunately, we were able to find all the information we needed and
proceed with the analysis.</p>
</div>
<div id="population-level-data" class="section level5">
<h5>2. Population-level data</h5>
<p>The health outcome and demographic data we utilized were on the
population level and were reported as prevalences. Since we don’t have
any individual data, it was difficult to find the most appropriate
analysis method to study the relationship between walkability and health
outcomes. After some searching, we found that beta regression is able to
model outcome in proportion, i.e. a continuous outcome between 0 and
1.</p>
</div>
<div id="deciding-the-geographic-unit" class="section level5">
<h5>3. Deciding the geographic unit</h5>
<p>As mentioned, the geographic unit is inconsistent across different
parts of this project, due to the availability of data and the
comprehensibility of the visual presentation. Here are the spatial units
for each component of this project: * Exploratory Data Analysis:
included analysis on the US, state, and county level data * Statistical
Analysis: beta regression was ran on the US level * Interactive
Walkability Map: walkability index and health outcome were analyzed on
the county level * Cluster Analysis: clusters were analyzed on the
census tract level in the 5 counties of NYC * Dashboard: numbers
reflected the walkability, health outcomes, and demographic data of
counties in NY State</p>
<p><br></p>
</div>
</div>
<div id="strengths-and-limitations" class="section level3">
<h3>Strengths and Limitations</h3>
<p><a href="limitations.html">Click here</a> to access the strengths and
limitations page</p>
<p><br></p>
<div id="strengths" class="section level4">
<h4>Strengths</h4>
<div id="reliable-and-updated-data-sources" class="section level5">
<h5>1. Reliable and updated data sources</h5>
<p>The data sources were downloaded from reliable sources, such as
Environmental Protection Agency, US Census American Community Survey,
and Behavioral Risk Factor Surveillance System. The
<code>latested</code> data from 2020 is used in the project for the most
updated information.</p>
</div>
<div id="comprehensive-quantitative-data-analysis"
class="section level5">
<h5>2. Comprehensive quantitative data analysis</h5>
<p>The project provided a comprehensive data analysis including
exploratory analysis, regression analysis, and spatial analysis to gain
a holistic understanding of national, state, and county walkability with
health outcomes.</p>
</div>
<div id="nationwide-walkability-data" class="section level5">
<h5>3. Nationwide walkability data</h5>
<p>The project provided an extensive understanding of national
walkability data, as well as demographics and health outcomes associated
with each area. The project did not focus on a specific region, rather
explored nationwide data on state and county level.</p>
</div>
<div id="interactive-maps-and-tables" class="section level5">
<h5>4. Interactive maps and tables</h5>
<p>The project included plenty of interactive maps and tables that
allows for searching of specific information one is interested in. The
interactive maps and tables also allowed for efficient and effective
learning of walkability in desired geographical regions.</p>
</div>
<div id="multiple-health-outcomes" class="section level5">
<h5>5. Multiple health outcomes</h5>
<p>The project inspected multiple health outcomes that showed
associations with walkability through the literature research. The five
health outcomes include high cholesterol, physical health, blood
pressure, physical inactivity, and mental health. The health outcomes
include both physical and mental health that are addressed with
walkability.</p>
<p><br></p>
</div>
</div>
<div id="limitations" class="section level4">
<h4>Limitations</h4>
<p>As detailed as our analyses were, they are not without
limitations.</p>
<div id="temporality-1" class="section level5">
<h5>1. Temporality</h5>
<p>We used the latest National Walkability Index data from 2021 (our
exposure dataset), and ACS demographics and BRFSS health prevalences
(outcome) datasets from 2020. Thus, our outcome data precede our
exposure data – meaning we are not able to infer temporality and hence
causality – we believe that this is acceptable given the specific
circumstances surrounding our data:</p>
<ul>
<li>The EPA National Walkability Index is updated infrequently</li>
<li>the last major update before 2021 was <a
href="https://www.epa.gov/sites/default/files/2021-06/documents/epa_sld_3.0_technicaldocumentationuserguide_may2021.pdf">in
2014</a></li>
<li>Since physical neighborhood attributes related to walkability (such
as street density and transit accessibility) change slowly – often over
a span of many years – we argue that walkability data from 2021 will
better capture the physical walking conditions of neighborhoods in 2020
compared to using an older 2014 version of the walkability index
dataset</li>
<li>Additionally, some may argue that since employment is a factor in
obtaining the walkability index, the pandemic may have restructured the
employment, so the walkability index cannot be considered the same</li>
<li>To address this, we can wait for the most recent 2022 BRFSS survey
report to be released and update our analyses accordingly</li>
</ul>
</div>
<div id="missing-data" class="section level5">
<h5>2. Missing data</h5>
<p>There was also a large percentage of missing data in the Walkability
Index dataset we used.</p>
<ul>
<li>The raw walkability data had 220,740 entries</li>
<li>The health outcome data (filtered for our variables of interest) had
71,335 entries (in the long format), of which not all census tracts have
all health outcomes available</li>
<li>There were 85,395 entries on age, sex, race and income</li>
<li>In the final merged dataframe, there are 116,311 distinct FIPS codes
containing at least 1 health outcome variable of interest (* is there a
way to see how many entries with all outcomes of interest? this doesn’t
seem right bc of the way health outcomes were pivoted; need to check
again)</li>
<li>This means that we lost 47.3% of our walkability entries</li>
</ul>
<p>Therefore, results from our analyses should be interpreted with
caution. We postulated that the missingness were not at random due to
the nature of data collection which can be associated with willingness,
resources, and political situation of the statistical bodies responsible
for such collection.</p>
</div>
<div id="lack-of-city-specific-analyses" class="section level5">
<h5>3. Lack of city-specific analyses</h5>
<p>We had initially hoped to look at the spatial clustering of our
various health outcomes at a New York City census-tract level, and to
compare the geographic clustering of health outcomes to that of
walkability scores. However, we found that there was a lack of BRFSS
health outcomes data for New York City (alongside other urban areas) and
were unable to conduct this additional spatial clustering analyses.</p>
<p><br></p>
</div>
</div>
</div>
<div id="next-steps" class="section level3">
<h3>Next Steps</h3>
<div id="update-to-include-most-recent-data" class="section level4">
<h4>Update to include most recent data</h4>
<p>This exploration into walkability in the US was ultimately just that
– exploratory, initial analyses, as we were constrained by incomplete
datasets alongside issues with temporality. With the recent release of
ACS 2021 estimates and the imminent one for BRFSS 2022, we may be able
to utilize them to more concretely control for issues with
temporality.</p>
</div>
<div id="use-individual-level-data" class="section level4">
<h4>Use individual-level data</h4>
<p>We were unable to utilize the individual-level data from ACS and
BRFSS due to their complex survey weighting regimens, and difficulties
in corresponding them with spatial analyses we were trying to conduct.
Tackling these would go beyond the scope of this class and may go beyond
the time frame provided.</p>
</div>
<div id="explore-intra-state-county-walkability" class="section level4">
<h4>Explore intra-state county walkability</h4>
<p>Unfortunately, due to issues with Shiny, we were only able to look at
a dashboard of health outcomes and demographics for counties in New York
State only. It would be more meaningful if we could look at the
distributions of health outcomes and demographic indicators for counties
within each state to look for patterns among regions.</p>
<p><br> <br></p>
<p><font size="+2">We hope you enjoy this project as much as we
do!</font></p>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
