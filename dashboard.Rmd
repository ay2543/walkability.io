---
title: "Dashboard"
output: 
  flexdashboard::flex_dashboard:
    vertical_layout: fill
    navbar:
      - { title: "Home", href: "index.html", align: right }
runtime: shiny

---

```{r setup, include=FALSE}
library(flexdashboard)
library(tidyverse)
library(plotly)
library(shiny)

# Read data

walkability = read_csv("./data/merge_final.csv") 

walkability_clean = walkability %>% 
  separate(name, c("census_tract", "county", "state"), sep = ", ") #%>% 
  #mutate(county_state = str_c(county, state, sep = ", ")) %>% 
  #select(-census_tract)
  

#rmarkdown::render("dashboard.Rmd", output_format = "flexdashboard::flex_dashboard")

```

Column {.sidebar}
-----------------------------------------------------------------------

```{r}

state = walkability_clean %>% distinct(state) %>% drop_na()

# selectInput(
#   inputId = "state_choice",
#   label = h3("State"),
#   choices = state
# )

fluidPage(
  title = "Search Bar",
  fluidRow(
    selectizeInput(
      inputId = "state_choice",
      label = "State Search Bar",
      multiple = FALSE,
      choices = c("Search Bar" = "", state),
      options = list(
        create = FALSE,
        placeholder = "Search Me",
        maxItems = '1',
        onDropdownOpen = I("function($dropdown) {if (!this.lastQuery.length) {this.close(); this.settings.openOnFocus = false;}}"),
        onType = I("function (str) {if (str === \"\") {this.close();}}")
      )
    ))
)


selectInput(
  inputId = "demo_choice",
  label = h3("Demographic indicator"), 
  choices = c("age", "sex", "race/ethnicity", "median Household Income")
) 

radioButtons(
  inputId = "outcome_choice",
  label = h3("Health outcome"),
  choices = c("Physical health", "Physical activity", "Cholesterol", "Blood pressure", "Mental health")
)

```

Column {data-width=500}
-----------------------------------------------------------------------

### Demography

```{r}

renderPrint({
  input[["state_choice"]]
})

# renderPlotly(
# walkability_clean %>%
#   filter(state == input[["location_choice"]]) %>% 
#   plot_ly(x = ~county, y = ~nat_walk_ind,
#           type = "bar", mode = "markers", alpha = 0.5)
# )
```



```{r}

```


Column {data-width=500}
-----------------------------------------------------------------------

### Health outcome

```{r}

```


