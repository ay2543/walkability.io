---
title: "dashboard"
output: 
  flexdashboard::flex_dashboard:
    vertical_layout: fill
    navbar:
      - { title: "Home", href: "index.html", align: right }
runtime: shiny

---

```{r setup, include=FALSE}
library(flexdashboard)
library(tidyverse)
library(plotly)
library(shiny)

# Read data

walkability = read_csv("./data/merge_final.csv") 

walkability_clean = walkability %>% 
  separate(name, c("census_tract", "county", "state"), sep = ", ") %>% 
  mutate(county_state = str_c(county, state, sep = ", ")) %>% 
  select(-census_tract)
  

#rmarkdown::render("dashboard.Rmd", output_format = "flexdashboard::flex_dashboard")

```

Column {.sidebar}
-----------------------------------------------------------------------

```{r}

location = walkability_clean %>% distinct(county_state)

# selectInput(
#   inputId = "location_choice",
#   label = h3("Location"), 
#   choices = location
# ) 

fluidPage(
  title = "Search Bar",
  fluidRow(
    selectizeInput(
      inputId = "location_choice", 
      label = "Location Search Bar",
      multiple = FALSE,
      choices = c("Search Bar" = "", location),
      options = list(
        create = FALSE,
        placeholder = "Search Me",
        maxItems = '1',
        onDropdownOpen = I("function($dropdown) {if (!this.lastQuery.length) {this.close(); this.settings.openOnFocus = false;}}"),
        onType = I("function (str) {if (str === \"\") {this.close();}}")
      )
    ))
)


selectInput(
  inputId = "demo_choice",
  label = h3("Demographic indicator"), 
  choices = c("age", "sex", "race/ethnicity", "median Household Income")
) 

radioButtons(
  inputId = "outcome_choice",
  label = h3("Health outcome"),
  choices = c("Physical health", "Physical activity", "Cholesterol", "Blood pressure", "Mental health")
)

```

Column {data-width=500}
-----------------------------------------------------------------------

### Demography

```{r}
renderPlotly(
walkability %>%
  plot_ly(x = ~input[["demo_choice"]], y = ~nat_walk_ind,
          type = "scatter", mode = "markers", alpha = 0.5)
)
```

Column {data-width=500}
-----------------------------------------------------------------------

### Health outcome

```{r}

```


